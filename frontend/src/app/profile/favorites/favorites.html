<div class="favorites-container">
  <div class="card">
    <div class="card-header">
      <h3>
        <i class="fas fa-heart"></i>
        Favorite Restaurants
      </h3>
      <p>Your list of favorite restaurants for quick access</p>
    </div>
    <div class="card-body">
      <!-- Success/Error Messages -->
      <div class="alert alert-success" *ngIf="successMessage">
        <i class="fas fa-check-circle"></i>
        {{ successMessage }}
      </div>

      <div class="alert alert-danger" *ngIf="errorMessage">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage }}
      </div>

      <div class="favorites-content" *ngIf="!isLoading">
        <div class="empty-state" *ngIf="favorites.length === 0">
          <div class="empty-icon">
            <i class="fas fa-heart"></i>
          </div>
          <h3>No Favorite Restaurants</h3>
          <p>You haven't added any restaurants to your favorites yet</p>
          <button class="btn btn-primary" (click)="browseRestaurants()">
            <i class="fas fa-search"></i>
            Browse Restaurants
          </button>
        </div>

        <div class="favorites-grid" *ngIf="favorites.length > 0">
          <app-restaurant-card *ngFor="let restaurant of favorites; trackBy: trackByRestaurant"
            [restaurant]="restaurant" [showDescription]="true" [showMinimumOrder]="true" [cardSize]="'medium'"
            [showPromotedBadge]="false" [showQuickActions]="true" (favoriteToggle)="onFavoriteToggle($event)"
            (quickView)="onQuickView($event)">
          </app-restaurant-card>
        </div>

        <!-- Actions -->
        <div class="form-actions" *ngIf="favorites.length > 0">
          <button class="btn btn-primary" (click)="refreshFavorites()" [disabled]="isLoading">
            @if (isLoading) {
            <span class="spinner"></span>
            }
            <i class="fas fa-sync-alt"></i>
            Refresh List
          </button>
          <button class="btn btn-secondary" (click)="browseRestaurants()">
            <i class="fas fa-plus"></i>
            Add More Favorites
          </button>
        </div>
      </div>

      <div class="loading-state" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Loading favorite restaurants...</p>
      </div>
    </div>
  </div>
</div>

<!-- Remove confirmation modal -->
<div class="modal-overlay" *ngIf="showRemoveModal" (click)="cancelRemove()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>
        <i class="fas fa-heart-broken"></i>
        Remove from Favorites
      </h3>
      <button class="close-btn" (click)="cancelRemove()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to remove this restaurant from your favorites?</p>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" (click)="cancelRemove()">
        <i class="fas fa-times"></i>
        Cancel
      </button>
      <button class="btn btn-danger" (click)="confirmRemove()">
        <i class="fas fa-heart-broken"></i>
        Remove
      </button>
    </div>
  </div>
</div>