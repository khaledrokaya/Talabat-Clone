<div class="admin-dashboard">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="welcome-section">
        <h1>
          <i class="fas fa-tachometer-alt"></i>
          Welcome to Talabat Admin
        </h1>
        <p>Monitor and manage your food delivery platform with powerful insights</p>
      </div>
      <div class="quick-actions">
        <button class="btn btn-primary" (click)="refreshData()" [disabled]="isLoading">
          <i class="fas fa-sync" [class.fa-spin]="isLoading"></i>
          Refresh Data
        </button>
        <button class="btn btn-outline-primary" (click)="refreshData()">
          <i class="fas fa-download"></i>
          Export Report
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="text-center">
      <div class="loading-spinner"></div>
      <p class="mt-3">Loading dashboard data...</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="alert alert-danger">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid" *ngIf="dashboardData && !isLoading">
    <!-- Total Orders -->
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-info">
          <div class="stat-label">Total Orders</div>
          <div class="stat-value">{{ formatNumber(dashboardData.orders.total) }}</div>
        </div>
        <div class="stat-icon orders">
          <i class="fas fa-shopping-cart"></i>
        </div>
      </div>
      <div class="stat-footer">
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span class="change-value">+12%</span>
          vs last month
        </div>
        <div class="stat-period">This month</div>
      </div>
    </div>

    <!-- Total Restaurants -->
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-info">
          <div class="stat-label">Restaurants</div>
          <div class="stat-value">{{ formatNumber(dashboardData.restaurants.total) }}</div>
        </div>
        <div class="stat-icon restaurants">
          <i class="fas fa-utensils"></i>
        </div>
      </div>
      <div class="stat-footer">
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span class="change-value">+8%</span>
          vs last month
        </div>
        <div class="stat-period">Active now</div>
      </div>
    </div>

    <!-- Total Users -->
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-info">
          <div class="stat-label">Total Users</div>
          <div class="stat-value">{{ formatNumber(dashboardData.users.total) }}</div>
        </div>
        <div class="stat-icon customers">
          <i class="fas fa-users"></i>
        </div>
      </div>
      <div class="stat-footer">
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span class="change-value">+15%</span>
          vs last month
        </div>
        <div class="stat-period">Registered</div>
      </div>
    </div>

    <!-- Platform Revenue -->
    <div class="stat-card">
      <div class="stat-header">
        <div class="stat-info">
          <div class="stat-label">Platform Revenue</div>
          <div class="stat-value">{{ formatCurrency(dashboardData.revenue.totalPlatformRevenue) }}</div>
        </div>
        <div class="stat-icon revenue">
          <i class="fas fa-dollar-sign"></i>
        </div>
      </div>
      <div class="stat-footer">
        <div class="stat-change positive">
          <i class="fas fa-arrow-up"></i>
          <span class="change-value">+23%</span>
          vs last month
        </div>
        <div class="stat-period">Total earned</div>
      </div>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div class="dashboard-content" *ngIf="!isLoading && !errorMessage">
    <!-- Main Chart Area -->
    <div class="main-chart">
      <div class="chart-header">
        <h3><i class="fas fa-chart-line"></i> Orders Overview</h3>
        <div class="chart-filters">
          <button class="filter-btn active">7 Days</button>
          <button class="filter-btn">30 Days</button>
          <button class="filter-btn">90 Days</button>
        </div>
      </div>
      <div class="chart-placeholder">
        <i class="fas fa-chart-area fa-2x"></i>
        <p>Orders chart will be displayed here</p>
      </div>
    </div>

    <!-- Sidebar Widgets -->
    <div class="sidebar-widgets">
      <!-- Recent Activity Widget -->
      <div class="widget">
        <div class="widget-header">
          <h4><i class="fas fa-bell"></i> Recent Activity</h4>
          <a href="#" class="widget-action">View All</a>
        </div>
        <div class="widget-content">
          <div class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-plus"></i>
            </div>
            <div class="activity-details">
              <div class="activity-title">New restaurant approved</div>
              <div class="activity-time">2 minutes ago</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="activity-details">
              <div class="activity-title">Large order completed</div>
              <div class="activity-time">5 minutes ago</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <div class="activity-details">
              <div class="activity-title">New user registered</div>
              <div class="activity-time">12 minutes ago</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Stats Widget -->
      <div class="widget">
        <div class="widget-header">
          <h4><i class="fas fa-tachometer-alt"></i> Quick Stats</h4>
        </div>
        <div class="widget-content">
          <div class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-motorcycle"></i>
            </div>
            <div class="activity-details">
              <div class="activity-title">Active Deliveries</div>
              <div class="activity-time">{{ dashboardData ? dashboardData.orders.pending : '0' }} ongoing</div>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="activity-details">
              <div class="activity-title">Avg Delivery Time</div>
              <div class="activity-time">32 minutes</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>