<div class="admin-dashboard-content">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1 class="dashboard-title">
          <i class="fas fa-tachometer-alt"></i>
          Dashboard Overview
        </h1>
        <p class="dashboard-subtitle">Monitor your platform's performance</p>
      </div>
      <div class="header-actions">
        <button class="btn btn-outline-primary" (click)="refreshData()" [disabled]="isLoading">
          <i class="fas fa-sync" [class.fa-spin]="isLoading"></i>
          Refresh
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading dashboard data...</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="alert alert-danger">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && !errorMessage">
    <!-- Stats Overview -->
    <div class="stats-section" *ngIf="dashboardData">
      <div class="row g-3 mb-4">
        <!-- Users Stats -->
        <div class="col-lg-3 col-md-6">
          <div class="stats-card users-card" (click)="navigateToUsers()">
            <div class="stats-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stats-content">
              <h3>{{ formatNumber(dashboardData.users.total) }}</h3>
              <p>Total Users</p>
              <div class="stats-breakdown">
                <small>Customers: {{ formatNumber(dashboardData.users.customers) }}</small>
                <small>Restaurants: {{ formatNumber(dashboardData.users.restaurants) }}</small>
                <small>Delivery: {{ formatNumber(dashboardData.users.delivery) }}</small>
              </div>
            </div>
            <div class="stats-action">
              <i class="fas fa-arrow-right"></i>
            </div>
          </div>
        </div>

        <!-- Orders Stats -->
        <div class="col-lg-3 col-md-6">
          <div class="stats-card orders-card" (click)="navigateToOrders()">
            <div class="stats-icon">
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="stats-content">
              <h3>{{ formatNumber(dashboardData.orders.total) }}</h3>
              <p>Total Orders</p>
              <div class="stats-breakdown">
                <small>Pending: {{ formatNumber(dashboardData.orders.pending) }}</small>
                <small>Completed: {{ formatNumber(dashboardData.orders.completed) }}</small>
              </div>
            </div>
            <div class="stats-action">
              <i class="fas fa-arrow-right"></i>
            </div>
          </div>
        </div>

        <!-- Restaurants Stats -->
        <div class="col-lg-3 col-md-6">
          <div class="stats-card restaurants-card" (click)="navigateToRestaurants()">
            <div class="stats-icon">
              <i class="fas fa-utensils"></i>
            </div>
            <div class="stats-content">
              <h3>{{ formatNumber(dashboardData.restaurants.total) }}</h3>
              <p>Restaurants</p>
              <div class="stats-breakdown">
                <small>Active: {{ formatNumber(dashboardData.restaurants.active) }}</small>
                <small>Pending: {{ formatNumber(dashboardData.restaurants.pending) }}</small>
              </div>
            </div>
            <div class="stats-action">
              <i class="fas fa-arrow-right"></i>
            </div>
          </div>
        </div>

        <!-- Revenue Stats -->
        <div class="col-lg-3 col-md-6">
          <div class="stats-card revenue-card">
            <div class="stats-icon">
              <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="stats-content">
              <h3>{{ formatCurrency(dashboardData.revenue.totalPlatformRevenue) }}</h3>
              <p>Total Revenue</p>
              <div class="stats-breakdown">
                <small>Monthly: {{ formatCurrency(dashboardData.revenue.monthlyRevenue) }}</small>
                <small>Avg Commission: {{ formatPercentage(dashboardData.revenue.averageCommission) }}</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions-section">
      <div class="section-header">
        <h4>
          <i class="fas fa-bolt"></i>
          Quick Actions
        </h4>
        <p>Access frequently used management tools</p>
      </div>
      
      <div class="row g-3">
        <div class="col-lg-4 col-md-6" *ngFor="let action of quickActions">
          <div class="action-card" (click)="navigateTo(action.route)">
            <div class="action-icon" [class]="'bg-' + action.color">
              <i [class]="action.icon"></i>
            </div>
            <div class="action-content">
              <h5>{{ action.title }}</h5>
              <p>{{ action.description }}</p>
            </div>
            <div class="action-arrow">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activity Summary -->
    <div class="activity-section" *ngIf="dashboardData">
      <div class="section-header">
        <h4>
          <i class="fas fa-clock"></i>
          Recent Activity
        </h4>
        <p>Latest platform activity summary</p>
      </div>
      
      <div class="row g-3">
        <div class="col-lg-6">
          <div class="activity-card">
            <div class="activity-header">
              <h6><i class="fas fa-user-plus text-success"></i> New Users This Month</h6>
            </div>
            <div class="activity-content">
              <div class="activity-number">{{ formatNumber(dashboardData.users.newUsersThisMonth) }}</div>
              <small class="text-muted">New registrations</small>
            </div>
          </div>
        </div>
        
        <div class="col-lg-6">
          <div class="activity-card">
            <div class="activity-header">
              <h6><i class="fas fa-chart-line text-primary"></i> Average Order Value</h6>
            </div>
            <div class="activity-content">
              <div class="activity-number">{{ formatCurrency(dashboardData.orders.averageOrderValue) }}</div>
              <small class="text-muted">Current average</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Top Performing Restaurants -->
    <div class="top-restaurants-section" *ngIf="dashboardData && dashboardData.revenue.topRestaurants.length > 0">
      <div class="section-header">
        <h4>
          <i class="fas fa-trophy"></i>
          Top Performing Restaurants
        </h4>
        <p>Highest revenue generating restaurants</p>
      </div>
      
      <div class="card">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Restaurant</th>
                <th>Revenue</th>
                <th>Orders</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let restaurant of dashboardData.revenue.topRestaurants.slice(0, 5)">
                <td>
                  <div class="restaurant-name">{{ restaurant.name }}</div>
                </td>
                <td>
                  <strong>{{ formatCurrency(restaurant.revenue) }}</strong>
                </td>
                <td>
                  <span class="badge bg-primary">{{ formatNumber(restaurant.orders) }}</span>
                </td>
                <td>
                  <button class="btn btn-outline-primary btn-sm" (click)="navigateToRestaurants()">
                    <i class="fas fa-eye"></i>
                    View
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
